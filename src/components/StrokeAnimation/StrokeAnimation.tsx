import React, {useEffect} from 'react';
import {View, StyleSheet} from 'react-native';
import {Easing, useSharedValue, withTiming} from 'react-native-reanimated';
import Svg from 'react-native-svg';
import AnimatedStroke from '../AnimatedStroke';
import {metrics} from '../../themes';

const MARGIN = 25;
/** Sansita bold stroke */
// const vWidth = 287 + MARGIN;
// const vHeight = 67 + MARGIN;
// const width = metrics.screenWidth - 64;
// const height = (width * vHeight) / vWidth;
// const paths = [
//   'M21.32 9.224C18.2 9.224 16.16 11.048 15.2 14.696C14.24 18.296 13.76 22.688 13.76 27.872C13.76 33.44 14.48 37.856 15.92 41.12C17.408 44.384 20.12 46.016 24.056 46.016C26.408 46.016 28.424 45.416 30.104 44.216C31.784 43.016 33.104 41.288 34.064 39.032C35.936 39.944 36.872 41.528 36.872 43.784C36.872 46.088 36.128 48.056 34.64 49.688C33.152 51.32 31.232 52.544 28.88 53.36C26.576 54.176 24.152 54.584 21.608 54.584C14.456 54.584 9.22397 52.304 5.91197 47.744C2.59997 43.184 0.94397 37.112 0.94397 29.528C0.94397 21.608 2.67197 15.392 6.12797 10.88C9.58397 6.32 14.912 4.04 22.112 4.04C26.48 4.04 30.08 4.832 32.912 6.416C35.744 8 37.16 10.568 37.16 14.12C37.16 16.232 36.464 17.936 35.072 19.232C33.728 20.528 32 21.176 29.888 21.176C28.304 21.176 27.056 20.912 26.144 20.384C26.48 18.848 26.648 17.576 26.648 16.568C26.648 11.672 24.872 9.224 21.32 9.224Z',
//   'M77.8259 19.232C77.8259 23.504 76.5299 26.96 73.9379 29.6C71.3459 32.192 67.9379 33.488 63.7139 33.488C61.7459 33.488 60.1139 33.152 58.8179 32.48C57.5219 31.76 56.8739 30.632 56.8739 29.096C60.0419 29.096 62.3219 28.328 63.7139 26.792C65.1539 25.208 65.8739 22.76 65.8739 19.448C65.8739 13.4 63.3299 10.376 58.2419 10.376C57.0419 10.376 55.7939 10.496 54.4979 10.736V53H42.5459V5.984C48.7379 5.408 54.0659 5.12 58.5299 5.12C64.5299 5.12 69.2339 6.2 72.6419 8.36C76.0979 10.472 77.8259 14.096 77.8259 19.232Z',
//   'M94.144 9.8C94.144 14.696 93.904 18.176 93.424 20.24C94.528 18.416 95.968 17.072 97.744 16.208C99.568 15.296 101.608 14.84 103.864 14.84C108.04 14.84 111.016 15.968 112.792 18.224C114.568 20.432 115.456 23.816 115.456 28.376V45.8C115.456 47.144 115.624 48.32 115.96 49.328C116.296 50.336 116.872 51.224 117.688 51.992C117.16 52.664 116.344 53.168 115.24 53.504C114.184 53.888 113.128 54.08 112.072 54.08C109.576 54.08 107.68 53.456 106.384 52.208C105.088 50.912 104.44 49.016 104.44 46.52V28.952C104.44 26.168 104.152 24.032 103.576 22.544C103.048 21.056 101.824 20.312 99.904 20.312C97.552 20.312 95.992 21.392 95.224 23.552C94.504 25.712 94.144 28.568 94.144 32.12V53H83.128V2.6L94.144 1.448V9.8Z',
//   'M129.237 0.00799561C131.205 0.00799561 132.765 0.463997 133.917 1.376C135.117 2.288 135.717 3.56 135.717 5.192C135.717 6.872 135.093 8.168 133.845 9.08C132.597 9.944 130.989 10.376 129.021 10.376C127.101 10.376 125.517 9.944 124.269 9.08C123.069 8.168 122.469 6.92 122.469 5.336C122.469 3.656 123.093 2.36 124.341 1.448C125.637 0.487997 127.269 0.00799561 129.237 0.00799561ZM134.421 45.8C134.421 47.144 134.589 48.32 134.925 49.328C135.261 50.336 135.837 51.224 136.653 51.992C136.125 52.664 135.309 53.168 134.205 53.504C133.149 53.888 132.093 54.08 131.037 54.08C128.541 54.08 126.645 53.456 125.349 52.208C124.053 50.912 123.405 49.016 123.405 46.52V16.28H134.421V45.8Z',
//   'M153.972 1.448V45.8C153.972 47.144 154.14 48.32 154.476 49.328C154.812 50.336 155.388 51.224 156.204 51.992C155.676 52.664 154.86 53.168 153.756 53.504C152.7 53.888 151.644 54.08 150.588 54.08C148.092 54.08 146.196 53.456 144.9 52.208C143.604 50.912 142.956 49.016 142.956 46.52V2.6L153.972 1.448Z',
//   'M168.401 0.00799561C170.369 0.00799561 171.929 0.463997 173.081 1.376C174.281 2.288 174.881 3.56 174.881 5.192C174.881 6.872 174.257 8.168 173.009 9.08C171.761 9.944 170.153 10.376 168.185 10.376C166.265 10.376 164.681 9.944 163.433 9.08C162.233 8.168 161.633 6.92 161.633 5.336C161.633 3.656 162.257 2.36 163.505 1.448C164.801 0.487997 166.433 0.00799561 168.401 0.00799561ZM173.585 45.8C173.585 47.144 173.753 48.32 174.089 49.328C174.425 50.336 175.001 51.224 175.817 51.992C175.289 52.664 174.473 53.168 173.369 53.504C172.313 53.888 171.257 54.08 170.201 54.08C167.705 54.08 165.809 53.456 164.513 52.208C163.217 50.912 162.569 49.016 162.569 46.52V16.28H173.585V45.8Z',
//   'M203.216 14.84C207.92 14.84 211.28 16.64 213.296 20.24C215.312 23.792 216.32 28.424 216.32 34.136C216.32 40.472 214.784 45.464 211.712 49.112C208.688 52.76 204.176 54.584 198.176 54.584C196.4 54.584 194.84 54.392 193.496 54.008V65.96L182.48 66.896V16.28L191.48 15.416L191.912 21.896C193.832 17.192 197.6 14.84 203.216 14.84ZM199.112 20.312C196.952 20.312 195.464 21.272 194.648 23.192C193.88 25.064 193.496 27.488 193.496 30.464V48.536C195.128 49.688 196.832 50.264 198.608 50.264C201.2 50.264 202.88 48.8 203.648 45.872C204.416 42.944 204.8 39.152 204.8 34.496C204.8 30.176 204.44 26.744 203.72 24.2C203.048 21.608 201.512 20.312 199.112 20.312Z',
//   'M235.797 18.8C234.549 18.8 233.541 19.16 232.773 19.88C232.053 20.6 231.693 21.56 231.693 22.76C231.693 24.584 232.365 26.096 233.709 27.296C235.053 28.496 237.093 29.816 239.829 31.256C241.989 32.456 243.717 33.512 245.013 34.424C246.309 35.288 247.413 36.416 248.325 37.808C249.237 39.152 249.693 40.784 249.693 42.704C249.693 46.688 248.253 49.664 245.373 51.632C242.493 53.6 238.773 54.584 234.213 54.584C230.469 54.584 227.253 53.984 224.565 52.784C221.877 51.584 220.533 49.568 220.533 46.736C220.533 44.912 221.157 43.544 222.405 42.632C223.701 41.72 225.357 41.264 227.373 41.264C228.957 41.264 230.085 41.504 230.757 41.984C230.469 43.04 230.325 44.168 230.325 45.368C230.325 47 230.709 48.296 231.477 49.256C232.245 50.168 233.373 50.624 234.861 50.624C236.397 50.624 237.573 50.192 238.389 49.328C239.205 48.416 239.613 47.168 239.613 45.584C239.613 43.76 238.941 42.248 237.597 41.048C236.253 39.848 234.237 38.528 231.549 37.088C229.389 35.936 227.637 34.904 226.293 33.992C224.997 33.08 223.893 31.928 222.981 30.536C222.069 29.144 221.613 27.488 221.613 25.568C221.613 21.968 223.053 19.28 225.933 17.504C228.813 15.728 232.365 14.84 236.589 14.84C240.093 14.84 243.141 15.416 245.733 16.568C248.325 17.72 249.621 19.616 249.621 22.256C249.621 23.984 248.949 25.328 247.605 26.288C246.309 27.2 244.677 27.656 242.709 27.656C242.133 27.656 241.509 27.608 240.837 27.512C240.213 27.416 239.733 27.248 239.397 27.008C239.685 25.76 239.829 24.608 239.829 23.552C239.829 22.112 239.469 20.96 238.749 20.096C238.077 19.232 237.093 18.8 235.797 18.8Z',
//   'M282.876 41.768C284.124 42.344 284.748 43.52 284.748 45.296C284.748 47.264 284.1 48.944 282.804 50.336C281.508 51.728 279.828 52.784 277.764 53.504C275.748 54.224 273.66 54.584 271.5 54.584C265.74 54.584 261.372 52.832 258.396 49.328C255.468 45.824 254.004 41.024 254.004 34.928C254.004 28.64 255.588 23.72 258.756 20.168C261.972 16.616 266.604 14.84 272.652 14.84C276.54 14.84 279.756 15.728 282.3 17.504C284.844 19.28 286.116 21.896 286.116 25.352C286.116 29.624 284.604 32.576 281.58 34.208C278.556 35.84 274.428 36.656 269.196 36.656C267.564 36.656 266.292 36.584 265.38 36.44C265.524 39.848 266.172 42.536 267.324 44.504C268.524 46.472 270.516 47.456 273.3 47.456C275.364 47.456 277.236 46.976 278.916 46.016C280.644 45.008 281.964 43.592 282.876 41.768ZM271.572 19.088C269.268 19.088 267.66 20.504 266.748 23.336C265.884 26.12 265.428 29.384 265.38 33.128H266.82C269.844 33.176 272.124 32.624 273.66 31.472C275.244 30.32 276.036 28.352 276.036 25.568C276.036 23.744 275.652 22.208 274.884 20.96C274.164 19.712 273.06 19.088 271.572 19.088Z',
// ];

/** Sansita regular bold */
const vWidth = 381 + MARGIN;
const vHeight = 90 + MARGIN;
const width = metrics.screenWidth - 64;
const height = (width * vHeight) / vWidth;
const paths = [
  'M27.76 12.632C23.6 12.632 20.88 15.064 19.6 19.928C18.32 24.728 17.68 30.584 17.68 37.496C17.68 44.92 18.64 50.808 20.56 55.16C22.544 59.512 26.16 61.688 31.408 61.688C34.544 61.688 37.232 60.888 39.472 59.288C41.712 57.688 43.472 55.384 44.752 52.376C47.248 53.592 48.496 55.704 48.496 58.712C48.496 61.784 47.504 64.408 45.52 66.584C43.536 68.76 40.976 70.392 37.84 71.48C34.768 72.568 31.536 73.112 28.144 73.112C18.608 73.112 11.632 70.072 7.21604 63.992C2.80004 57.912 0.592041 49.816 0.592041 39.704C0.592041 29.144 2.89604 20.856 7.50404 14.84C12.112 8.76 19.216 5.72 28.816 5.72C34.64 5.72 39.44 6.776 43.216 8.888C46.992 11 48.88 14.424 48.88 19.16C48.88 21.976 47.952 24.248 46.096 25.976C44.304 27.704 42 28.568 39.184 28.568C37.072 28.568 35.408 28.216 34.192 27.512C34.64 25.464 34.864 23.768 34.864 22.424C34.864 15.896 32.496 12.632 27.76 12.632Z',
  'M103.101 25.976C103.101 31.672 101.373 36.28 97.9173 39.8C94.4613 43.256 89.9173 44.984 84.2853 44.984C81.6613 44.984 79.4853 44.536 77.7573 43.64C76.0293 42.68 75.1653 41.176 75.1653 39.128C79.3893 39.128 82.4293 38.104 84.2853 36.056C86.2053 33.944 87.1653 30.68 87.1653 26.264C87.1653 18.2 83.7733 14.168 76.9893 14.168C75.3893 14.168 73.7253 14.328 71.9973 14.648V71H56.0613V8.31199C64.3173 7.544 71.4213 7.16 77.3733 7.16C85.3733 7.16 91.6453 8.6 96.1893 11.48C100.797 14.296 103.101 19.128 103.101 25.976Z',
  'M124.859 13.4C124.859 19.928 124.539 24.568 123.899 27.32C125.371 24.888 127.291 23.096 129.659 21.944C132.091 20.728 134.811 20.12 137.819 20.12C143.387 20.12 147.355 21.624 149.723 24.632C152.091 27.576 153.275 32.088 153.275 38.168V61.4C153.275 63.192 153.499 64.76 153.947 66.104C154.395 67.448 155.163 68.632 156.251 69.656C155.547 70.552 154.459 71.224 152.987 71.672C151.579 72.184 150.171 72.44 148.763 72.44C145.435 72.44 142.907 71.608 141.179 69.944C139.451 68.216 138.587 65.688 138.587 62.36V38.936C138.587 35.224 138.203 32.376 137.435 30.392C136.731 28.408 135.099 27.416 132.539 27.416C129.403 27.416 127.323 28.856 126.299 31.736C125.339 34.616 124.859 38.424 124.859 43.16V71H110.171V3.8L124.859 2.264V13.4Z',
  'M171.65 0.343994C174.274 0.343994 176.354 0.951996 177.89 2.168C179.49 3.384 180.29 5.08 180.29 7.256C180.29 9.496 179.458 11.224 177.794 12.44C176.13 13.592 173.986 14.168 171.362 14.168C168.802 14.168 166.69 13.592 165.026 12.44C163.426 11.224 162.626 9.56 162.626 7.44799C162.626 5.208 163.458 3.48 165.122 2.264C166.85 0.983995 169.026 0.343994 171.65 0.343994ZM178.562 61.4C178.562 63.192 178.786 64.76 179.234 66.104C179.682 67.448 180.45 68.632 181.538 69.656C180.834 70.552 179.746 71.224 178.274 71.672C176.866 72.184 175.458 72.44 174.05 72.44C170.722 72.44 168.194 71.608 166.466 69.944C164.738 68.216 163.874 65.688 163.874 62.36V22.04H178.562V61.4Z',
  'M204.629 2.264V61.4C204.629 63.192 204.853 64.76 205.301 66.104C205.749 67.448 206.517 68.632 207.605 69.656C206.901 70.552 205.813 71.224 204.341 71.672C202.933 72.184 201.525 72.44 200.117 72.44C196.789 72.44 194.261 71.608 192.533 69.944C190.805 68.216 189.941 65.688 189.941 62.36V3.8L204.629 2.264Z',
  'M223.869 0.343994C226.493 0.343994 228.573 0.951996 230.109 2.168C231.709 3.384 232.509 5.08 232.509 7.256C232.509 9.496 231.677 11.224 230.013 12.44C228.349 13.592 226.205 14.168 223.581 14.168C221.021 14.168 218.909 13.592 217.245 12.44C215.645 11.224 214.845 9.56 214.845 7.44799C214.845 5.208 215.677 3.48 217.341 2.264C219.069 0.983995 221.245 0.343994 223.869 0.343994ZM230.781 61.4C230.781 63.192 231.005 64.76 231.453 66.104C231.901 67.448 232.669 68.632 233.757 69.656C233.053 70.552 231.965 71.224 230.493 71.672C229.085 72.184 227.677 72.44 226.269 72.44C222.941 72.44 220.413 71.608 218.685 69.944C216.957 68.216 216.093 65.688 216.093 62.36V22.04H230.781V61.4Z',
  'M270.288 20.12C276.56 20.12 281.04 22.52 283.728 27.32C286.416 32.056 287.76 38.232 287.76 45.848C287.76 54.296 285.712 60.952 281.616 65.816C277.584 70.68 271.568 73.112 263.568 73.112C261.2 73.112 259.12 72.856 257.328 72.344V88.28L242.64 89.528V22.04L254.64 20.888L255.216 29.528C257.776 23.256 262.8 20.12 270.288 20.12ZM264.816 27.416C261.936 27.416 259.952 28.696 258.864 31.256C257.84 33.752 257.328 36.984 257.328 40.952V65.048C259.504 66.584 261.776 67.352 264.144 67.352C267.6 67.352 269.84 65.4 270.864 61.496C271.888 57.592 272.4 52.536 272.4 46.328C272.4 40.568 271.92 35.992 270.96 32.6C270.064 29.144 268.016 27.416 264.816 27.416Z',
  'M313.73 25.4C312.066 25.4 310.722 25.88 309.698 26.84C308.738 27.8 308.258 29.08 308.258 30.68C308.258 33.112 309.154 35.128 310.946 36.728C312.738 38.328 315.458 40.088 319.106 42.008C321.986 43.608 324.29 45.016 326.018 46.232C327.746 47.384 329.218 48.888 330.434 50.744C331.65 52.536 332.258 54.712 332.258 57.272C332.258 62.584 330.338 66.552 326.498 69.176C322.658 71.8 317.698 73.112 311.618 73.112C306.626 73.112 302.338 72.312 298.754 70.712C295.17 69.112 293.378 66.424 293.378 62.648C293.378 60.216 294.21 58.392 295.874 57.176C297.602 55.96 299.81 55.352 302.498 55.352C304.61 55.352 306.114 55.672 307.01 56.312C306.626 57.72 306.434 59.224 306.434 60.824C306.434 63 306.946 64.728 307.97 66.008C308.994 67.224 310.498 67.832 312.482 67.832C314.53 67.832 316.098 67.256 317.186 66.104C318.274 64.888 318.818 63.224 318.818 61.112C318.818 58.68 317.922 56.664 316.13 55.064C314.338 53.464 311.65 51.704 308.066 49.784C305.186 48.248 302.85 46.872 301.058 45.656C299.33 44.44 297.858 42.904 296.642 41.048C295.426 39.192 294.818 36.984 294.818 34.424C294.818 29.624 296.738 26.04 300.578 23.672C304.418 21.304 309.154 20.12 314.786 20.12C319.458 20.12 323.522 20.888 326.978 22.424C330.434 23.96 332.162 26.488 332.162 30.008C332.162 32.312 331.266 34.104 329.474 35.384C327.746 36.6 325.57 37.208 322.946 37.208C322.178 37.208 321.346 37.144 320.45 37.016C319.618 36.888 318.978 36.664 318.53 36.344C318.914 34.68 319.106 33.144 319.106 31.736C319.106 29.816 318.626 28.28 317.666 27.128C316.77 25.976 315.458 25.4 313.73 25.4Z',
  'M376.501 56.024C378.165 56.792 378.997 58.36 378.997 60.728C378.997 63.352 378.133 65.592 376.405 67.448C374.677 69.304 372.437 70.712 369.685 71.672C366.997 72.632 364.213 73.112 361.333 73.112C353.653 73.112 347.829 70.776 343.861 66.104C339.957 61.432 338.005 55.032 338.005 46.904C338.005 38.52 340.117 31.96 344.341 27.224C348.629 22.488 354.805 20.12 362.869 20.12C368.053 20.12 372.341 21.304 375.733 23.672C379.125 26.04 380.821 29.528 380.821 34.136C380.821 39.832 378.805 43.768 374.773 45.944C370.741 48.12 365.237 49.208 358.261 49.208C356.085 49.208 354.389 49.112 353.173 48.92C353.365 53.464 354.229 57.048 355.765 59.672C357.365 62.296 360.021 63.608 363.733 63.608C366.485 63.608 368.981 62.968 371.221 61.688C373.525 60.344 375.285 58.456 376.501 56.024ZM361.429 25.784C358.357 25.784 356.213 27.672 354.997 31.448C353.845 35.16 353.237 39.512 353.173 44.504H355.093C359.125 44.568 362.165 43.832 364.213 42.296C366.325 40.76 367.381 38.136 367.381 34.424C367.381 31.992 366.869 29.944 365.845 28.28C364.885 26.616 363.413 25.784 361.429 25.784Z',
];

const styles = StyleSheet.create({
  layer: {
    ...StyleSheet.absoluteFillObject,
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
});

interface Props {
  fadeOutOverlay: () => void;
}

// TODO: Make notes from the tutorial in comments https://www.youtube.com/watch?v=oZHIwKJHrq0&t=610s
const StrokeAnimation = ({fadeOutOverlay}: Props) => {
  const progress = useSharedValue(0);
  useEffect(() => {
    progress.value = withTiming(
      1,
      {
        duration: 4500,
        easing: Easing.linear,
      },
      (isFinished) => isFinished && fadeOutOverlay(),
    );
  }, [progress, fadeOutOverlay]);

  return (
    <View style={styles.layer}>
      <Svg
        width={width}
        height={height}
        viewBox={[
          -MARGIN / 2,
          -MARGIN / 2,
          vWidth + MARGIN / 2,
          vHeight + MARGIN / 2,
        ].join(' ')}>
        {paths.map((d, key) => (
          <AnimatedStroke progress={progress} d={d} key={key} />
        ))}
      </Svg>
    </View>
  );
};

export default StrokeAnimation;
